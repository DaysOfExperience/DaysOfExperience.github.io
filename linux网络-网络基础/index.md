# 

随便看看喽~

# 局域网 - 广域网

所谓 "局域网" 和 "广域网" 只是一个相对的概念. 比如, 我们有 "天朝特色" 的广域网, 也可以看做一个比较大的局域网.

# 协议

"协议" 是一种约定.

计算机之间的传输媒介是光信号和电信号. 通过 "频率" 和 "强弱" 来表示 0 和 1 这样的信息. 要想传递各种不同的信 息, 就需要约定好双方的数据格式.

计算机生产厂商有很多;  计算机操作系统, 也有很多;  计算机网络硬件设备, 还是有很多;  如何让这些不同厂商之间生产的计算机能够相互顺畅的通信? 就需要有人站出来, 约定一个共同的标准,  大家都来遵守, 这就是 网络协议;

# 网络协议初识

## 协议分层

分层最大的好处在于 "封装"

## OSI七层模型

- OSI（Open System Interconnection，开放系统互连）七层网络模型称为开放式系统互联参考模型， **是一个逻辑上的定义和规范;**
- 把**网络从逻辑上分为了7层**. 每一层都有相关、相对应的物理设备，比如路由器，交换机;
- OSI 七层模型是一种框架性的设计方法，其最主要的功能就是帮助不同类型的主机实现数据传输;
- 它的最大优点是将服务、接口和协议这三个概念明确地区分开来，概念清楚，理论也比较完整. 通过七个层次化的结构模型使不同的系统不同的网络之间实现可靠的通讯;

- ![image-20230812224003146](C:\Users\yangzilong\AppData\Roaming\Typora\typora-user-images\image-20230812224003146.png)
- 但是, 它既复杂又不实用; 所以我们按照TCP/IP四层模型来讲解.

## TCP/IP五层(或四层)模型

TCP/IP是一组协议的代名词，它还包括许多协议，组成了TCP/IP协议簇.  TCP/IP通讯协议采用了5层的层级结构，每一层都呼叫它的下一层所提供的网络来完成自己的需求.

物理层: 负责光/电信号的传递方式. 比如现在以太网通用的网线(双绞线)、早期以太网采用的的同轴电缆 (现在主要用于有线电视)、光纤, 现在的wifi无线网使用电磁波等都属于物理层的概念。物理层的能力决定了最大传输速率、传输距离、抗干扰性等. 集线器(Hub)工作在物理层. 

数据链路层: 负责设备之间的数据帧的传送和识别. 例如网卡设备的驱动、帧同步(就是说从网线上检测到什么信号算作新帧的开始)、冲突检测(如果检测到冲突就自动重发)、数据差错校验等工作. 有以太网、令牌环网, 无线LAN等标准. 交换机(Switch)工作在数据链路层. 

网络层: 负责地址管理和路由选择. 例如在IP协议中, 通过IP地址来标识一台主机, 并通过路由表的方式规划出两台主机之间的数据传输的线路(路由). 路由器(Router)工作在网路层. 

传输层: 负责两台主机之间的数据传输. 如传输控制协议 (TCP), **能够确保数据可靠的从源主机发送到目标主机.** 

应用层: 负责应用程序间沟通，如简单电子邮件传输（SMTP）、文件传输协议（FTP）、网络远程访问协议（Telnet）等. 我们的网络编程主要就是针对应用层.

![image-20230812222342937](C:\Users\yangzilong\AppData\Roaming\Typora\typora-user-images\image-20230812222342937.png)

# 网络传输基本流程

## 网络传输流程图

同一个网段内的两台主机进行文件传输

![image-20230812222701307](C:\Users\yangzilong\AppData\Roaming\Typora\typora-user-images\image-20230812222701307.png)

跨网段的主机的文件传输. 数据从一台计算机到另一台计算机传输过程中要经过一个或多个路由器

![image-20230812222728447](C:\Users\yangzilong\AppData\Roaming\Typora\typora-user-images\image-20230812222728447.png)

# 数据包封装和分用

不同的协议层对数据包有不同的称谓，在传输层叫做段(segment)，在网络层叫做数据报 (datagram)，在链路层叫做帧(frame).

应用层数据通过协议栈发到网络上时，每层协议都要加上一个数据首部(header)，称为封装 (Encapsulation)。首部信息中包含了一些类似于首部有多长, 载荷(payload)有多长, 上层协议是什么等信息

数据封装成帧后发到传输介质上（以太网/令牌环），到达目的主机后每层协议再剥掉相应的首部，根据首部中的 "上层协议 字段" 将数据交给对应的上层协议处理。

## 数据封装的过程

![image-20230812223105888](C:\Users\yangzilong\AppData\Roaming\Typora\typora-user-images\image-20230812223105888.png)

## 数据分用的过程

![image-20230812223200463](C:\Users\yangzilong\AppData\Roaming\Typora\typora-user-images\image-20230812223200463.png)

# 网络中的地址管理

## 认识IP地址

IP协议有两个版本, IPv4和IPv6. 我们整个的课程, 凡是提到IP协议, 没有特殊说明的, 默认都是指IPv4

- IP地址是在IP协议中, 用来标识网络中不同主机的地址; 
- 对于IPv4来说, IP地址是一个4字节, 32位的整数; 
- 我们通常也使用 "点分十进制" 的字符串表示IP地址, 例如 192.168.0.1; 用点分割的每一个数字表示一个 字节, 范围是 0 - 255;

## 认识MAC地址

- MAC地址用来识别数据链路层中相连的节点; 
- MAC地址长度为48位, 即6个字节. 一般用16进制数字加上冒号的形式来表示(例如: 08:00:27:03:fb:19) 
- 在网卡出厂时就确定了, 不能修改. mac地址通常是唯一的(虚拟机中的mac地址不是真实的mac地址, 可能会冲突; 也有些网卡支持用户配置mac地址).
